# مدیریت خرید وسایل خانه (Flask + SQLite)

این پروژه یک اپلیکیشن تحت‌وب ساده برای مدیریت خرید وسایل خانه است که امکان افزودن **وسیله** و ثبت چند **مدل/گزینه** برای هر وسیله را می‌دهد تا بتوانید آنها را مقایسه و یک گزینه را به‌عنوان **انتخاب نهایی** علامت بزنید.

## امکانات

-   افزودن وسیله با دسته، زیردسته، اتاق، بودجه و یادداشت
-   **دسته‌بندی کامل**: ۷ دسته اصلی با زیردسته‌های تخصصی
    -   🍳 **آشپزخانه**: یخچال، اجاق گاز، فر برقی، مایکروویو و...
    -   🛏️ **اتاق خواب**: تخت‌خواب، کمد، میز آرایش و...
    -   🛋️ **نشیمن**: مبلمان، تلویزیون، سیستم صوتی و...
    -   🚿 **حمام و سرویس**: ماشین لباسشویی، وان، روشویی و...
    -   🧹 **نظافت**: جاروبرقی، تی، مواد شوینده و...
    -   🔑 **ایمنی**: کمک‌های اولیه، کپسول آتش‌نشانی و...
    -   🏡 **عمومی**: میز ناهارخوری، گلدان، ابزارآلات و...
-   **فیلتر پیشرفته**: فیلتر بر اساس دسته و زیردسته
-   افزودن چندین گزینه برای هر وسیله (برند، مدل، قیمت، فروشگاه، لینک، ویژگی‌ها، امتیاز، گارانتی، موجودی، یادداشت)
-   انتخاب یک گزینه به‌عنوان انتخاب نهایی (به‌صورت خودکار سایر گزینه‌ها لغو می‌شوند)
-   داشبورد خلاصه: تعداد وسایل، تعداد انتخاب‌شده، درصد پیشرفت، مجموع هزینه انتخاب‌ها و بودجه کل
-   جدول‌های تمیز با قابلیت حذف موارد
-   نمودار مقایسه‌ای قیمت و امتیاز برای هر وسیله (Chart.js)
-   خروجی CSV از گزینه‌های انتخاب‌شده
-   **راه‌اندازی دستی دیتابیس**: دکمه مخصوص در نوار ناوبری

## اجرا

### روش ۱: اجرای مستقیم (توسعه)

1. ایجاد و فعال‌سازی محیط مجازی (دلخواه)
2. نصب پیش‌نیازها:
    ```bash
    pip install -r requirements.txt
    ```
3. اجرا:
    ```bash
    python app.py
    ```
4. مرورگر را باز کنید: `http://localhost:5000`
5. **برای راه‌اندازی دیتابیس**: روی دکمه "🗄️ راه‌اندازی دیتابیس" در نوار ناوبری کلیک کنید

### روش ۲: اجرا با Docker (توصیه شده برای تولید)

1. نصب [Docker](https://docs.docker.com/get-docker/) و [Docker Compose](https://docs.docker.com/compose/install/)
2. اجرای خودکار:

    ```bash
    # Linux/macOS
    chmod +x deploy.sh && ./deploy.sh

    # Windows
    deploy.bat
    ```

3. یا اجرای دستی:
    ```bash
    docker-compose up -d
    ```
4. مرورگر را باز کنید: `http://localhost:5000`

📖 **برای اطلاعات کامل Docker**: [DOCKER_README.md](DOCKER_README.md)

## راه‌اندازی دیتابیس

-   **روش ۱**: کلیک روی دکمه "🗄️ راه‌اندازی دیتابیس" در نوار ناوبری
-   **روش ۲**: اجرای مستقیم اسکریپت مهاجرت:
    ```bash
    python migrate_db.py
    ```

> تنظیمات:
>
> -   متغیر محیطی `SECRET_KEY` را برای تولید مقدار امن‌تر مشخص کنید.
> -   دیتابیس پیش‌فرض: `sqlite:///shopping.db`

## ساختار داده

-   **Category** (name) - دسته‌های اصلی
-   **Subcategory** (name, category_id) - زیردسته‌های تخصصی
-   **Item** (name, room, notes, budget, category_id, subcategory_id) - وسایل
-   **Option** (item_id, brand, model_name, price, store, link, features, rating, warranty_months, available, notes, selected) - گزینه‌ها

## ویژگی‌های جدید

-   ✅ **زیردسته‌ها**: امکان دسته‌بندی دقیق‌تر وسایل
-   ✅ **فیلتر پیشرفته**: فیلتر بر اساس دسته و زیردسته
-   ✅ **راه‌اندازی دستی**: کنترل کامل روی زمان راه‌اندازی دیتابیس
-   ✅ **نمایش زیردسته**: نمایش زیردسته در جزئیات و لیست وسایل

موفق باشید 🌟
